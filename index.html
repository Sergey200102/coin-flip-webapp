<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û—Ä–µ–ª –∏–ª–∏ –†–µ—à–∫–∞ | TON</title>
    <script src="https://unpkg.com/@tonconnect/sdk@latest"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0e0e0e;
            color: #f5f5f5;
            text-align: center;
            margin: 0;
            padding: 20px;
        }
        h1 {
            margin-bottom: 10px;
        }
        .coin {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: #1a1a1a;
            margin: 20px auto;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            box-shadow: 0 0 15px #00ffcc;
            transition: transform 0.5s;
        }
        .coin.spin {
            animation: flip 2s ease-in-out;
        }
        @keyframes flip {
            0% { transform: rotateY(0); }
            100% { transform: rotateY(720deg); }
        }
        input[type="number"] {
            width: 90%;
            padding: 10px;
            margin: 10px 0;
            border: none;
            border-radius: 5px;
            font-size: 16px;
        }
        button {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            background-color: #00cc99;
            color: white;
            font-size: 16px;
            margin: 8px;
            cursor: pointer;
        }
        button.active {
            background-color: #007f66;
        }
        .tab-btn {
            padding: 10px;
            border: none;
            background: #222;
            color: #fff;
            margin: 5px;
            cursor: pointer;
        }
        .tab-btn.active {
            background: #00cc99;
        }
        #walletAddress {
            margin-top: 10px;
            font-size: 14px;
            color: #aaa;
        }
    </style>
</head>
<body>
    <h1>–û—Ä–µ–ª –∏–ª–∏ –†–µ—à–∫–∞</h1>

    <div>
        <button class="tab-btn active" onclick="switchTab('demo')">–î–µ–º–æ</button>
        <button class="tab-btn" onclick="switchTab('real')">–ù–∞ TON</button>
    </div>

    <div id="demoTab">
        <div id="balance">–ë–∞–ª–∞–Ω—Å: 100 ‚Ç∏</div>
        <input type="number" id="betAmount" placeholder="–°—Ç–∞–≤–∫–∞">

        <div class="coin" id="coin">
            <span id="coinText">?</span>
        </div>

        <div>
            <button id="headsBtn">–û—Ä—ë–ª</button>
            <button id="tailsBtn">–†–µ—à–∫–∞</button>
        </div>
        <div>
            <button id="playBtn" disabled>–ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É</button>
        </div>
    </div>

    <div id="realTab" style="display:none;">
        <button id="connectWalletBtn">–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫</button>
        <div id="walletAddress"></div>
        <p style="margin-top: 20px;">–ò–≥—Ä–∞ –Ω–∞ TON –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ üöß</p>
    </div>

    <script>
        // –î–µ–º–æ –ª–æ–≥–∏–∫–∞
        const coin = document.getElementById("coin");
        const coinText = document.getElementById("coinText");
        const playBtn = document.getElementById("playBtn");
        const headsBtn = document.getElementById("headsBtn");
        const tailsBtn = document.getElementById("tailsBtn");
        const betAmount = document.getElementById("betAmount");
        const balanceDisplay = document.getElementById("balance");

        let selectedChoice = null;
        let balance = parseInt(localStorage.getItem("demo_balance")) || 100;
        balanceDisplay.innerText = `–ë–∞–ª–∞–Ω—Å: ${balance} ‚Ç∏`;

        betAmount.addEventListener('input', () => {
            playBtn.disabled = !betAmount.value || isNaN(betAmount.value) || parseFloat(betAmount.value) <= 0;
        });

        function updateChoiceButtons() {
            headsBtn.classList.remove("active");
            tailsBtn.classList.remove("active");
            if (selectedChoice === "heads") headsBtn.classList.add("active");
            if (selectedChoice === "tails") tailsBtn.classList.add("active");
        }

        headsBtn.addEventListener("click", () => {
            selectedChoice = "heads";
            updateChoiceButtons();
        });

        tailsBtn.addEventListener("click", () => {
            selectedChoice = "tails";
            updateChoiceButtons();
        });

        playBtn.addEventListener("click", () => {
            const bet = parseInt(betAmount.value);
            if (!selectedChoice || bet > balance) {
                alert("–ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞–≤–∫—É –∏ –≤—ã–±–æ—Ä —Å—Ç–æ—Ä–æ–Ω—ã.");
                return;
            }

            coin.classList.add("spin");
            coinText.innerText = "";
            playBtn.disabled = true;

            setTimeout(() => {
                coin.classList.remove("spin");
                const result = Math.random() < 0.5 ? "heads" : "tails";
                coinText.innerText = result === "heads" ? "–û—Ä—ë–ª" : "–†–µ—à–∫–∞";

                setTimeout(() => {
                    if (selectedChoice === result) {
                        balance += bet;
                        alert(`–¢—ã –≤—ã–∏–≥—Ä–∞–ª ${bet} ‚Ç∏!`);
                    } else {
                        balance -= bet;
                        alert(`–¢—ã –ø—Ä–æ–∏–≥—Ä–∞–ª ${bet} ‚Ç∏.`);
                    }
                    if (balance <= 0) balance = 100;
                    localStorage.setItem("demo_balance", balance);
                    balanceDisplay.innerText = `–ë–∞–ª–∞–Ω—Å: ${balance} ‚Ç∏`;
                    playBtn.disabled = false;
                }, 500);

            }, 2000);
        });

        // Tabs
        function switchTab(tab) {
            document.getElementById("demoTab").style.display = tab === "demo" ? "block" : "none";
            document.getElementById("realTab").style.display = tab === "real" ? "block" : "none";
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove("active"));
            document.querySelectorAll('.tab-btn')[tab === "demo" ? 0 : 1].classList.add("active");
        }

        // TON Connect
        const tonConnect = new TON_CONNECT.TonConnect();
        tonConnect.setup({ manifestUrl: "https://yourdomain.com/tonconnect-manifest.json" });

        const connectWalletBtn = document.getElementById("connectWalletBtn");
        const walletAddressDiv = document.getElementById("walletAddress");

        connectWalletBtn.addEventListener("click", async () => {
            try {
                const connectedWallet = await tonConnect.connectWallet();
                walletAddressDiv.innerText = `–ê–¥—Ä–µ—Å: ${connectedWallet.account.address}`;
            } catch (err) {
                alert("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫");
            }
        });
    </script>
</body>
</html>

